(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{7470:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/v1sh",function(){return a(2276)}])},2276:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var n=a(4051),s=a.n(n),i=a(5893),r=a(9008),o=a.n(r),c=a(5675),d=a.n(c),u=a(7160),l=a.n(u),m=a(8736),h=a(7294),p=a(7757);function g(e,t,a,n,s,i,r){try{var o=e[i](r),c=o.value}catch(d){return void a(d)}o.done?t(c):Promise.resolve(c).then(n,s)}function v(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function r(e){g(i,n,s,r,o,"next",e)}function o(e){g(i,n,s,r,o,"throw",e)}r(void 0)}))}}for(var x=new Array,f=0;f<12;f++)x.push(Math.PI*f/12-Math.PI/2);var N,_,j,w,b={},y=0,C=0,I=1,M=function(){var e=v(s().mark((function e(t){var a,n,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,e.next=3,y.run(b);case 3:n=e.sent,b[y.inputNames[1]]=n[y.outputNames[0]],b[y.inputNames[2]]=n[y.outputNames[1]],b[y.inputNames[3]]=n[y.outputNames[2]],b[y.inputNames[4]]=n[y.outputNames[3]],i=new Date,r=i.getTime()-a.getTime(),S(N,I,n[y.outputNames[4]].data),S(_,I,n[y.outputNames[5]].data),S(j,I,n[y.outputNames[6]].data),S(w,I,n[y.outputNames[7]].data),E(C,n[y.outputNames[2]].data,56,96,!0),document.getElementById("inference_time").innerHTML=r,document.getElementById("iterations").innerHTML=I,I+=1,window.requestAnimationFrame(M);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(e,t,a){e.data.labels.push(t),e.data.datasets[0].data.push(a),e.update()}function k(e,t,a,n,s,i){var r=(s[0]+i[0])/2,o=(s[1]+i[1])/2,c=r+n*Math.cos(a),d=o-n*Math.sin(a),u=r+n*Math.cos(a+Math.PI),l=o-n*Math.sin(a+Math.PI);e.beginPath(),e.moveTo(Math.round(c),Math.round(d)),e.lineTo(Math.round(u),Math.round(l)),e.lineWidth=t,e.stroke()}function E(e,t,a,n,s){var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height);for(var r=0;r<12;r++)for(var o=0;o<a;o++)for(var c=0;c<n;c++)if(!(t[r*a*n+o*n+c]<=0)){var d=t[r*a*n+o*n+c];1==s&&(d*=9),k(i,d,x[r],10,[20*c,20*o],[20*(c+1),20*(o+1)])}}function A(){var e=(0,h.useState)(),t=e[0],a=e[1],n=(0,h.useState)(),r=n[0],c=n[1],u=(0,h.useState)(),g=u[0],x=u[1],f=function(){var e=v(s().mark((function e(t){var n,i,r,o,d,u,l,h,g,v,f,I,S,k,A,H,P,O,L,T,B,R,D,F,G,V,q;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null!=(n=document.getElementById("image").files[0])){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,c(1);case 6:return e.next=8,x(1);case 8:return i=document.getElementById("myCanvas"),r=document.createElement("canvas"),o=r.getContext("2d"),r.width=500,r.height=300,e.next=15,createImageBitmap(n);case 15:return d=e.sent,o.drawImage(d,0,0,500,300),e.next=19,new Promise((function(e){return r.toBlob(e,1)}));case 19:for(u=e.sent,l=new File([u],n.name,n),a(URL.createObjectURL(l)),h=o.getImageData(0,0,r.width,r.height),g=h.data,v=new Float32Array(r.width*r.height),f=0,I=0;I<g.length;I+=4)v[f]=.299*g[I]/255+.587*g[I+1]/255+.114*g[I+2]/255,f+=1;return S=new m.Tensor("float32",v,[300,500]),e.next=30,m.InferenceSession.create("/GTHModel.onnx",{executionProviders:["webgl"],graphOptimizationLevel:"all"});case 30:return k=e.sent,(A={})[k.inputNames[0]]=S,e.next=35,k.run(A);case 35:return H=(H=e.sent)[k.outputNames[0]],i.height=1120,i.width=1920,e.next=41,E(i,H.data,56,96,!1);case 41:return e.next=43,m.InferenceSession.create("/V1SHNetInitModel.onnx",{executionProviders:["wasm"],graphOptimizationLevel:"all"});case 43:return P=e.sent,console.log("Inference session created"),O={},e.next=48,P.run(O);case 48:return L=e.sent,T=L[P.outputNames[0]],B=L[P.outputNames[1]],R=L[P.outputNames[2]],D=L[P.outputNames[3]],(C=document.getElementById("outputCanvas")).height=1120,C.width=1920,e.next=58,m.InferenceSession.create("/V1SHComputeMachineModel.onnx",{executionProviders:["wasm"],graphOptimizationLevel:"all"});case 58:y=e.sent,b[y.inputNames[0]]=H,b[y.inputNames[1]]=T,b[y.inputNames[2]]=B,b[y.inputNames[3]]=R,b[y.inputNames[4]]=D,F=document.getElementById("avgSpCanvas"),G=document.getElementById("avgSmCanvas"),V=document.getElementById("avgOutSpCanvas"),q=document.getElementById("avgOutSmCanvas"),N=new p.Chart(F,{type:"line",data:{labels:[0],datasets:[{label:"Avg Sp",data:[0],fill:!1,borderColor:"rgb(250, 110, 110)"}]},options:{datasets:{line:{pointRadius:0}},scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:.5}}]}}}),_=new p.Chart(G,{type:"line",data:{labels:[0],datasets:[{label:"Avg Sm",data:[B.data],fill:!1,borderColor:"rgb(75, 190, 190)"}]},options:{datasets:{line:{pointRadius:0}},scales:{yAxes:[{ticks:{suggestedMin:1,suggestedMax:1.5}}]}}}),j=new p.Chart(V,{type:"line",data:{labels:[0],datasets:[{label:"Avg Sp Out",data:[R.data],fill:!1,borderColor:"rgb(250, 160, 160)"}]},options:{datasets:{line:{pointRadius:0}},scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:.5}}]}}}),w=new p.Chart(q,{type:"line",data:{labels:[0],datasets:[{label:"Avg Sm Out",data:[D.data],fill:!1,borderColor:"rgb(150, 220, 220)"}]},options:{datasets:{line:{pointRadius:0}},scales:{yAxes:[{ticks:{ticks:{suggestedMin:0,suggestedMax:.5}}}]}}}),window.requestAnimationFrame(M);case 73:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:l().container,children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Contour Model | MPI for Biological Cybernetics"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("link",{rel:"icon",href:"/mpg.svg"}),(0,i.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=optional",rel:"stylesheet"})]}),(0,i.jsxs)("main",{className:l().main,children:[(0,i.jsx)("h2",{className:l().description,children:"A Neural Model of Contour Integration in the Primary Visual Cortex"}),(0,i.jsx)("h3",{children:"Zhaoping Li"}),(0,i.jsxs)("div",{className:l().grid,children:[(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Documentation \u2192"}),(0,i.jsxs)("div",{children:["This is a web implementation of ",(0,i.jsx)("i",{children:"A Neural Model of Contour Integration in the Primary Visual Cortex"})," ",(0,i.jsx)("a",{href:"https://pubmed.ncbi.nlm.nih.gov/9573412/",children:"paper"}),"."]})]}),(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Input image"}),(0,i.jsxs)("form",{onSubmit:f,children:[(0,i.jsx)("label",{form:"inputData",children:"Input Image Data to Load:"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"file",id:"image"}),(0,i.jsx)("button",{type:"submit",children:"Compute"})]}),(0,i.jsx)("div",{className:"images",children:t&&(0,i.jsx)(d(),{src:t,alt:"",width:500,height:300})})]}),r&&(0,i.jsxs)("div",{className:l().cardLarge,children:[(0,i.jsx)("h3",{children:"Input Hypercolumns"}),(0,i.jsx)("canvas",{className:l().canvas,id:"myCanvas",width:"500",height:"300"})]}),g&&(0,i.jsxs)("div",{className:l().cardLarge,children:[(0,i.jsx)("h3",{children:"Excitatory Gain Output"}),(0,i.jsxs)("div",{className:l().textstat,children:["Inference time: ",(0,i.jsx)("div",{className:l().textstat,id:"inference_time"}),"ms"]}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:l().textstat,children:["Current iterations: ",(0,i.jsx)("div",{className:l().textstat,id:"iterations"})]}),(0,i.jsx)("canvas",{className:l().canvas,id:"outputCanvas",width:"500",height:"300"})]}),g&&(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Average Excitatory"}),(0,i.jsx)("canvas",{className:l().canvas,id:"avgSpCanvas",width:"400",height:"400"})]}),g&&(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Average Inhibitory"}),(0,i.jsx)("canvas",{className:l().canvas,id:"avgSmCanvas",width:"400",height:"400"})]}),g&&(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Average Excitatory Out"}),(0,i.jsx)("canvas",{className:l().canvas,id:"avgOutSpCanvas",width:"400",height:"400"})]}),g&&(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("h3",{children:"Average Inhibitory Out"}),(0,i.jsx)("canvas",{className:l().canvas,id:"avgOutSmCanvas",width:"400",height:"400"})]})]})]}),(0,i.jsxs)("footer",{className:l().footer,children:[(0,i.jsx)("a",{href:"https://www.kyb.tuebingen.mpg.de/",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)(d(),{src:"/kybmpg.svg",height:150,width:400})}),(0,i.jsx)("div",{children:"Computation and Cognition T\xfcbingen Summer 2022"})]})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",textstat:"Home_textstat__7NbPI",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",cardLarge:"Home_cardLarge__v2IXq",canvas:"Home_canvas__x616u",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[770,885,698,847,774,888,179],(function(){return t=7470,e(e.s=t);var t}));var t=e.O();_N_E=t}]);